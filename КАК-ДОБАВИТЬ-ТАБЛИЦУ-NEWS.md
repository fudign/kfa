# ๐ ะกะพะทะดะฐะฝะธะต ัะฐะฑะปะธัั ะฝะพะฒะพััะตะน ะฒ Supabase

## ะัะพะฑะปะตะผะฐ

ะขะฐะฑะปะธัะฐ `news` ะฝะต ัััะตััะฒัะตั ะฒ ะฑะฐะทะต ะดะฐะฝะฝัั Supabase, ะฟะพััะพะผั NewsManager ะฝะต ะผะพะถะตั ะทะฐะณััะทะธัั ะฝะพะฒะพััะธ.

## ะะตัะตะฝะธะต - ะัะฟะพะปะฝะธัะต SQL ัะบัะธะฟั

### ะจะฐะณ 1: ะัะบัะพะนัะต Supabase Dashboard

1. ะะตัะตะนะดะธัะต ะฝะฐ https://supabase.com/dashboard
2. ะะพะนะดะธัะต ะฒ ะฐะบะบะฐัะฝั
3. ะัะฑะตัะธัะต ะฒะฐั ะฟัะพะตะบั (kfa-production)

### ะจะฐะณ 2: ะัะบัะพะนัะต SQL Editor

1. ะ ะปะตะฒะพะผ ะผะตะฝั ะฝะฐะถะผะธัะต **SQL Editor**
2. ะะฐะถะผะธัะต **New query** (ะธะปะธ ะธัะฟะพะปัะทัะนัะต Quick start query)

### ะจะฐะณ 3: ะัะฟะพะปะฝะธัะต SQL ัะบัะธะฟั

1. ะัะบัะพะนัะต ัะฐะนะป **`CREATE-NEWS-TABLE.sql`** ะฒ ััะพะน ะฟะฐะฟะบะต
2. ะกะบะพะฟะธััะนัะต ะฒะตัั ะบะพะด (Ctrl+A, Ctrl+C)
3. ะััะฐะฒััะต ะฒ SQL Editor (Ctrl+V)
4. ะะฐะถะผะธัะต **Run** ะธะปะธ **F5**

### ะจะฐะณ 4: ะัะพะฒะตัััะต ัะตะทัะปััะฐั

ะะพัะปะต ะฒัะฟะพะปะฝะตะฝะธั SQL ะฒั ัะฒะธะดะธัะต:

```
Test news data inserted successfully
```

ะ ัะฐะฑะปะธัั ั 5 ัะตััะพะฒัะผะธ ะฝะพะฒะพัััะผะธ:

| id  | title                        | status    | featured |
| --- | ---------------------------- | --------- | -------- |
| 1   | ะะพะฑัะพ ะฟะพะถะฐะปะพะฒะฐัั...          | published | โญ true  |
| 2   | ะะฐะบ ัะฐะฑะพัะฐัั ั ัะตะดะฐะบัะพัะพะผ... | published | false    |
| 3   | ะงะตัะฝะพะฒะธะบ ะฝะพะฒะพััะธ...          | draft     | false    |
| 4   | ะะฐะฑะพัะฐ ั ะธะทะพะฑัะฐะถะตะฝะธัะผะธ...    | published | false    |
| 5   | ะะพะฒะพััะธ ะพ ัะฐะทะฒะธัะธะธ...        | published | โญ true  |

### ะจะฐะณ 5: ะัะพะฒะตัััะต ะธะฝัะตััะตะนั

1. ะัะบัะพะนัะต https://kfa-website.vercel.app/dashboard/news
2. **ะะฑัะทะฐัะตะปัะฝะพ ะฒัะนะดะธัะต ะธ ะฒะพะนะดะธัะต ัะฝะพะฒะฐ** (ััะพะฑั ะพะฑะฝะพะฒะธัั ัะพะบะตะฝ)
3. ะั ะดะพะปะถะฝั ัะฒะธะดะตัั ัะฟะธัะพะบ ะฝะพะฒะพััะตะน

---

## ะงัะพ ัะพะทะดะฐัั SQL ัะบัะธะฟั:

### 1. ะขะฐะฑะปะธัะฐ `public.news`

- **id** - ัะฝะธะบะฐะปัะฝัะน ะธะดะตะฝัะธัะธะบะฐัะพั
- **title** - ะทะฐะณะพะปะพะฒะพะบ ะฝะพะฒะพััะธ
- **slug** - URL-friendly ะฝะฐะทะฒะฐะฝะธะต
- **content** - HTML ัะพะดะตัะถะธะผะพะต
- **excerpt** - ะบัะฐัะบะพะต ะพะฟะธัะฐะฝะธะต
- **image** - URL ะธะทะพะฑัะฐะถะตะฝะธั
- **status** - ััะฐััั (draft/published/archived)
- **featured** - ะธะทะฑัะฐะฝะฝะฐั ะฝะพะฒะพััั
- **author_id** - ะฐะฒัะพั (ัะฒัะทั ั profiles)
- **category** - ะบะฐัะตะณะพัะธั
- **tags** - ัะตะณะธ (ะผะฐััะธะฒ)
- **published_at** - ะดะฐัะฐ ะฟัะฑะปะธะบะฐัะธะธ
- **created_at, updated_at** - ัะปัะถะตะฑะฝัะต ะดะฐัั

### 2. ะะฝะดะตะบัั ะดะปั ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ

- ะะพ slug (ะดะปั ะฑััััะพะณะพ ะฟะพะธัะบะฐ ะฟะพ URL)
- ะะพ status (ะดะปั ัะธะปัััะฐัะธะธ)
- ะะพ published_at (ะดะปั ัะพััะธัะพะฒะบะธ)
- ะะพ featured (ะดะปั ะธะทะฑัะฐะฝะฝัั)
- ะะพ author_id (ะดะปั ัะธะปัััะฐ ะฟะพ ะฐะฒัะพัั)
- ะะพ category (ะดะปั ะบะฐัะตะณะพัะธะน)

### 3. RLS ะะพะปะธัะธะบะธ ะฑะตะทะพะฟะฐัะฝะพััะธ

- ะัะฑะปะธัะฝัะน ะดะพัััะฟ ะบ ะพะฟัะฑะปะธะบะพะฒะฐะฝะฝัะผ ะฝะพะฒะพัััะผ
- ะงัะตะฝะธะต ะฒัะตั ะฝะพะฒะพััะตะน ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน ั ะฟัะฐะฒะพะผ `content.view`
- ะกะพะทะดะฐะฝะธะต ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน ั ะฟัะฐะฒะพะผ `content.create`
- ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน ั ะฟัะฐะฒะพะผ `content.edit`
- ะฃะดะฐะปะตะฝะธะต ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน ั ะฟัะฐะฒะพะผ `content.delete`

### 4. ะขัะธะณะณะตัั

- ะะฒัะพะผะฐัะธัะตัะบะพะต ะพะฑะฝะพะฒะปะตะฝะธะต `updated_at` ะฟัะธ ะธะทะผะตะฝะตะฝะธะธ

### 5. ะขะตััะพะฒัะต ะดะฐะฝะฝัะต

- 5 ะฝะพะฒะพััะตะน ะดะปั ะฟัะพะฒะตัะบะธ ัะฐะฑะพัั ัะธััะตะผั
- 3 ะพะฟัะฑะปะธะบะพะฒะฐะฝะฝัั ะฝะพะฒะพััะธ (2 ะธะทะฑัะฐะฝะฝัั)
- 1 ัะตัะฝะพะฒะธะบ
- ะะฐะทะฝัะต ะบะฐัะตะณะพัะธะธ

---

## ะัะปะธ ะฒะพะทะฝะธะบะปะธ ะฟัะพะฑะปะตะผั

### ะัะธะฑะบะฐ: "Table already exists"

ะะฝะฐัะธั ัะฐะฑะปะธัะฐ ัะถะต ัะพะทะดะฐะฝะฐ. ะัะพะฒะตัััะต ะดะฐะฝะฝัะต:

```sql
SELECT * FROM public.news ORDER BY created_at DESC;
```

### ะัะธะฑะบะฐ ั permissions

ะฃะฑะตะดะธัะตัั ััะพ ั ะฒะฐั ะตััั ะฟัะฐะฒะฐ:

```sql
SELECT email, role, permissions
FROM public.profiles
WHERE role = 'admin';
```

ะะพะปะถะฝะพ ะฑััั: `'content.view', 'content.create', 'content.edit', 'content.delete'`

### ะะพะฒะพััะธ ะฝะต ะพัะพะฑัะฐะถะฐัััั ะฒ ะธะฝัะตััะตะนัะต

1. **ะัะพะฒะตัััะต ะดะฐะฝะฝัะต ะฒ ะะ:**

   ```sql
   SELECT COUNT(*) FROM public.news;
   ```

2. **ะัะพะฒะตัััะต RLS ะฟะพะปะธัะธะบะธ:**

   ```sql
   SELECT * FROM pg_policies WHERE tablename = 'news';
   ```

3. **ะัะพะฒะตัััะต ะบะพะฝัะพะปั ะฑัะฐัะทะตัะฐ (F12)** ะฝะฐ ะพัะธะฑะบะธ

4. **ะะฑัะทะฐัะตะปัะฝะพ ะฟะตัะตะปะพะณะธะฝััะตัั** - ะฒัะนะดะธัะต ะธ ะฒะพะนะดะธัะต ัะฝะพะฒะฐ

---

## ะะพัะปะต ะฒัะฟะพะปะฝะตะฝะธั SQL

ะัะบัะพะนัะต https://kfa-website.vercel.app/dashboard/news

ะั ะดะพะปะถะฝั ัะฒะธะดะตัั:

```
๐ฐ ะฃะฟัะฐะฒะปะตะฝะธะต ะฝะพะฒะพัััะผะธ

[+ ะกะพะทะดะฐัั ะฝะพะฒะพััั]  [๐ ะะพะธัะบ]  [๐ ะคะธะปัััั]

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ โญ ะะพะฑัะพ ะฟะพะถะฐะปะพะฒะฐัั ะฒ ัะธััะตะผั...        โ
โ ๐ข ะะฟัะฑะปะธะบะพะฒะฐะฝะพ | ะะฑัะตะต                 โ
โ [๐๏ธ ะัะพัะผะพัั] [โ๏ธ ะะตะดะฐะบัะธัะพะฒะฐัั] [๐๏ธ ะฃะดะฐะปะธัั] โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะะฐะบ ัะฐะฑะพัะฐัั ั ัะตะดะฐะบัะพัะพะผ ะฝะพะฒะพััะตะน      โ
โ ๐ข ะะฟัะฑะปะธะบะพะฒะฐะฝะพ | ะะฝััััะบัะธะธ            โ
โ [๐๏ธ ะัะพัะผะพัั] [โ๏ธ ะะตะดะฐะบัะธัะพะฒะฐัั] [๐๏ธ ะฃะดะฐะปะธัั] โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

... ะธ ัะฐะบ ะดะฐะปะตะต
```

---

## ะะพะฝัะฐะบัั ะดะปั ะฟะพะผะพัะธ

ะัะปะธ ััะพ-ัะพ ะฝะต ัะฐะฑะพัะฐะตั:

1. ะัะพะฒะตัััะต ะบะพะฝัะพะปั ะฑัะฐัะทะตัะฐ (F12 โ Console)
2. ะัะพะฒะตัััะต Network tab (F12 โ Network) ะฝะฐ ะพัะธะฑะบะธ API
3. ะฃะฑะตะดะธัะตัั ััะพ ะฒั ะฒะพัะปะธ ะบะฐะบ admin
4. ะะพะฟัะพะฑัะนัะต ะพัะธััะธัั ะบัั ะฑัะฐัะทะตัะฐ (Ctrl+Shift+R)

โ **ะะพัะปะต ะฒัะฟะพะปะฝะตะฝะธั ะฒัะตั ัะฐะณะพะฒ ะฝะพะฒะพััะธ ะฑัะดัั ัะฐะฑะพัะฐัั!**
