<?php

namespace Database\Seeders;

use App\Models\News;
use App\Models\User;
use Illuminate\Database\Seeder;
use Illuminate\Support\Str;

class NewsSeeder extends Seeder
{
    /**
     * Run the database seeds.
     */
    public function run(): void
    {
        // Получаем админа как автора
        $admin = User::where('email', 'admin@kfa.kg')->first();

        if (!$admin) {
            echo "⚠️  Администратор не найден. Сначала выполните DevUsersSeeder\n";
            return;
        }

        $newsData = [
            [
                'title' => 'Новые стандарты корпоративного управления в Кыргызстане',
                'slug' => 'novye-standarty-korporativnogo-upravleniya-v-kyrgyzstane',
                'excerpt' => 'КФА представляет обновленный Кодекс корпоративного управления, разработанный с учетом международных лучших практик и особенностей национальной экономики.',
                'content' => '<p>Кыргызская Ассоциация Финансистов рада объявить о выпуске обновленного Кодекса корпоративного управления. Новый стандарт разработан с учетом международных лучших практик и адаптирован к особенностям национальной экономики.</p>

<h2>Ключевые нововведения</h2>
<p>Обновленный кодекс включает в себя расширенные требования к:</p>
<ul>
<li>Прозрачности корпоративной отчетности</li>
<li>Независимости совета директоров</li>
<li>Управлению рисками и внутреннему контролю</li>
<li>Защите прав акционеров и инвесторов</li>
</ul>

<h2>Влияние на бизнес</h2>
<p>Новые стандарты помогут компаниям повысить эффективность управления, привлечь инвестиции и укрепить доверие стейкхолдеров. КФА предлагает комплексную поддержку в процессе внедрения новых требований.</p>',
                'image' => 'https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?w=800&h=600&fit=crop',
                'status' => 'published',
                'featured' => true,
                'published_at' => now()->subDays(2),
                'author_id' => $admin->id,
            ],
            [
                'title' => 'Запуск программы сертификации независимых директоров',
                'slug' => 'zapusk-programmy-sertifikacii-nezavisimyh-direktorov',
                'excerpt' => 'КФА запускает уникальную программу обучения и сертификации для независимых директоров. Программа соответствует международным стандартам и адаптирована для кыргызского рынка.',
                'content' => '<p>Мы рады представить новую образовательную программу для подготовки квалифицированных независимых директоров.</p>

<h2>О программе</h2>
<p>Программа разработана ведущими экспертами в области корпоративного управления и включает:</p>
<ul>
<li>Теоретические основы корпоративного управления</li>
<li>Практические кейсы и симуляции</li>
<li>Финансовый анализ и риск-менеджмент</li>
<li>Правовые аспекты деятельности директоров</li>
</ul>

<h2>Преимущества сертификации</h2>
<p>Сертифицированные директора получают доступ к эксклюзивной сети профессионалов, приоритетное размещение в базе независимых директоров КФА и возможности для профессионального развития.</p>',
                'image' => 'https://images.unsplash.com/photo-1552664730-d307ca884978?w=800&h=600&fit=crop',
                'status' => 'published',
                'featured' => true,
                'published_at' => now()->subDays(5),
                'author_id' => $admin->id,
            ],
            [
                'title' => 'Международная конференция по ESG в Бишкеке',
                'slug' => 'mezhdunarodnaya-konferenciya-po-esg-v-bishkeke',
                'excerpt' => '15-16 ноября в Бишкеке пройдет международная конференция, посвященная внедрению ESG-принципов в корпоративное управление.',
                'content' => '<p>КФА совместно с международными партнерами проводит конференцию, посвященную устойчивому развитию и ESG-повестке.</p>

<h2>Программа мероприятия</h2>
<p>Двухдневная конференция включает:</p>
<ul>
<li>Пленарные сессии с участием международных экспертов</li>
<li>Панельные дискуссии по ключевым темам ESG</li>
<li>Мастер-классы по внедрению ESG-практик</li>
<li>Networking-сессии для участников</li>
</ul>

<h2>Спикеры</h2>
<p>В конференции примут участие представители ОЭСР, IFC, ведущих компаний и регуляторов региона.</p>

<p><strong>Регистрация открыта до 10 ноября.</strong></p>',
                'image' => 'https://images.unsplash.com/photo-1540575467063-178a50c2df87?w=800&h=600&fit=crop',
                'status' => 'published',
                'featured' => false,
                'published_at' => now()->subDays(7),
                'author_id' => $admin->id,
            ],
            [
                'title' => 'Результаты исследования «Практики корпоративного управления в КР»',
                'slug' => 'rezultaty-issledovaniya-praktiki-korporativnogo-upravleniya-v-kr',
                'excerpt' => 'КФА представляет результаты ежегодного исследования состояния корпоративного управления в компаниях Кыргызстана за 2024 год.',
                'content' => '<p>Завершено масштабное исследование практик корпоративного управления в 150 крупнейших компаниях страны.</p>

<h2>Ключевые выводы</h2>
<p>Исследование показало:</p>
<ul>
<li>45% компаний улучшили практики раскрытия информации</li>
<li>Средний индекс корпоративного управления вырос на 12%</li>
<li>Доля независимых директоров увеличилась до 35%</li>
<li>68% компаний внедрили комитеты по аудиту</li>
</ul>

<h2>Рекомендации</h2>
<p>На основе результатов КФА разработала комплекс рекомендаций для дальнейшего совершенствования корпоративного управления.</p>

<p>Полный отчет доступен для членов КФА в личном кабинете.</p>',
                'image' => 'https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=800&h=600&fit=crop',
                'status' => 'published',
                'featured' => false,
                'published_at' => now()->subDays(10),
                'author_id' => $admin->id,
            ],
            [
                'title' => 'Новые курсы для финансовых директоров',
                'slug' => 'novye-kursy-dlya-finansovyh-direktorov',
                'excerpt' => 'Образовательный центр КФА объявляет набор на специализированные курсы повышения квалификации для финансовых директоров.',
                'content' => '<p>Стартует новая образовательная программа для CFO и финансовых руководителей компаний.</p>

<h2>Программа обучения</h2>
<p>6-недельный курс охватывает:</p>
<ul>
<li>Стратегическое финансовое планирование</li>
<li>Управление корпоративными финансами</li>
<li>Финансовая отчетность по МСФО</li>
<li>Управление рисками и внутренний контроль</li>
<li>Цифровая трансформация финансовой функции</li>
</ul>

<h2>Преподаватели</h2>
<p>Занятия ведут практикующие CFO крупных компаний, международные эксперты и преподаватели ведущих бизнес-школ.</p>

<p><strong>Начало занятий: 1 декабря 2024</strong></p>',
                'image' => 'https://images.unsplash.com/photo-1434030216411-0b793f4b4173?w=800&h=600&fit=crop',
                'status' => 'published',
                'featured' => false,
                'published_at' => now()->subDays(12),
                'author_id' => $admin->id,
            ],
        ];

        foreach ($newsData as $data) {
            News::updateOrCreate(
                ['slug' => $data['slug']],
                $data
            );
            echo "✓ Новость '{$data['title']}' создана/обновлена\n";
        }

        echo "\n✅ Создано/обновлено " . count($newsData) . " тестовых новостей!\n";
    }
}
