# üöÄ –§–ò–ù–ê–õ–¨–ù–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ó–ê–ü–£–°–ö–£ –°–ò–°–¢–ï–ú–´ –£–ü–†–ê–í–õ–ï–ù–ò–Ø –ù–û–í–û–°–¢–Ø–ú–ò

## ‚úÖ –ß–¢–û –ë–´–õ–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### Backend (Laravel) ‚úÖ
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å `News.php` —Å –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å `Media.php` —Å –æ–±—Ä–∞—Ç–Ω—ã–º–∏ —Å–≤—è–∑—è–º–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã –¥–≤–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è —Å–≤—è–∑–µ–π news-media
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `NewsController.php` —Å –ø–æ–ª–Ω—ã–º CRUD + –º–µ–¥–∏–∞ + –º–æ–¥–µ—Ä–∞—Ü–∏—è
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã Request –∫–ª–∞—Å—Å—ã —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `NewsResource.php` —Å —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã API routes –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### Frontend (React + TypeScript) ‚úÖ
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã TypeScript —Ç–∏–ø—ã (`types/news.ts`)
- ‚úÖ –°–æ–∑–¥–∞–Ω `NewsService` API client (`services/api/news.ts`)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç –≤ `services/api.ts` –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ä–æ—É—Ç –≤ `App.tsx` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –≤ `DashboardLayout.tsx`:
  - üì∞ –ù–æ–≤–æ—Å—Ç–∏ (`/dashboard/news`)
  - üìÖ –°–æ–±—ã—Ç–∏—è (`/dashboard/events`)
  - ‚úì –£—á–∞—Å—Ç–Ω–∏–∫–∏ (`/dashboard/members`)
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π `NewsManagerPage` —Å–æ–≤–º–µ—Å—Ç–∏–º —Å –Ω–æ–≤—ã–º API

---

## üéØ –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨ –í–ê–ú (2 –®–ê–ì–ê)

### –®–ê–ì 1: –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ Backend ‚ö†Ô∏è

```bash
cd kfa-backend/kfa-api
php artisan migrate
```

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏:**
- `2025_10_27_000001_update_mediable_table.php` - –¥–æ–±–∞–≤–ª—è–µ—Ç `type`, `order`, timestamps
- `2025_10_27_000002_add_featured_image_id_to_news_table.php` - —Å–≤—è–∑—å –Ω–∞ –≥–ª–∞–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

### –®–ê–ì 2: –ù–∞–∑–Ω–∞—á–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ —Ä–æ–ª–∏ admin

```bash
cd kfa-backend/kfa-api
php artisan tinker
```

–ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```php
// –ü–æ–ª—É—á–∏—Ç—å —Ä–æ–ª—å admin
$admin = Role::where('name', 'admin')->first();

// –ù–∞–∑–Ω–∞—á–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤–æ—Å—Ç—è–º–∏
$admin->givePermissionTo([
    'content.view',
    'content.create',
    'content.update',
    'content.delete',
    'media.view',
    'media.upload',
    'media.delete'
]);

// –í—ã–π—Ç–∏
exit
```

---

## üéâ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –¥–≤—É—Ö —à–∞–≥–æ–≤ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ:

### –î–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ:
```
Frontend: http://localhost:5173/dashboard/news
Backend API: http://localhost:8000/api/news
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–ª–∞–≤–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º (featured_image_id)
- ‚úÖ –ì–∞–ª–µ—Ä–µ—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (—á–µ—Ä–µ–∑ –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω—É—é —Å–≤—è–∑—å)
- ‚úÖ –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (approve, reject, publish, archive)
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –Ω–æ–≤–æ—Å—Ç—è–º
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫
- ‚úÖ –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å—Ç–∞—Ç—É—Å–æ–≤:
  - draft (—á–µ—Ä–Ω–æ–≤–∏–∫)
  - submitted (–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ)
  - pending (–Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏)
  - approved (–æ–¥–æ–±—Ä–µ–Ω–æ)
  - rejected (–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ)
  - published (–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ)
  - unpublished (—Å–Ω—è—Ç–æ —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏)
  - archived (–≤ –∞—Ä—Ö–∏–≤–µ)

---

## üìä –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–ò–°–¢–ï–ú–´

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤

**–ì–ª–∞–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:**
```
news.featured_image_id ‚Üí media.id (–ø—Ä—è–º–∞—è —Å–≤—è–∑—å Foreign Key)
```

**–ì–∞–ª–µ—Ä–µ—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
```
news ‚Üî media (polymorphic —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É mediable)
```

### –¢–∞–±–ª–∏—Ü–∞ `mediable`:
```sql
- media_id (FK ‚Üí media.id)
- mediable_id (FK ‚Üí news.id)
- mediable_type ('App\Models\News')
- collection ('news' –∏–ª–∏ 'news-gallery')
- type ('featured' | 'gallery')
- order (–¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –≥–∞–ª–µ—Ä–µ–∏)
- timestamps
```

---

## üîí –°–ò–°–¢–ï–ú–ê –ü–†–ê–í –î–û–°–¢–£–ü–ê

### –ü—É–±–ª–∏—á–Ω—ã–µ endpoints (–±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏):
```
GET /api/news              - –°–ø–∏—Å–æ–∫ –Ω–æ–≤–æ—Å—Ç–µ–π
GET /api/news/{id}         - –û–¥–Ω–∞ –Ω–æ–≤–æ—Å—Ç—å
```

### –ó–∞—â–∏—â–µ–Ω–Ω—ã–µ endpoints (—Ç—Ä–µ–±—É—é—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏):

**CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏** (—Ç—Ä–µ–±—É—é—Ç `content.*` –ø—Ä–∞–≤–∞):
```
POST   /api/news           - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å
PUT    /api/news/{id}      - –û–±–Ω–æ–≤–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å
DELETE /api/news/{id}      - –£–¥–∞–ª–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å
```

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞** (—Ç—Ä–µ–±—É—é—Ç `content.update`):
```
POST   /api/news/{id}/media             - –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –º–µ–¥–∏–∞—Ñ–∞–π–ª
DELETE /api/news/{id}/media/{mediaId}   - –û—Ç–∫—Ä–µ–ø–∏—Ç—å –º–µ–¥–∏–∞—Ñ–∞–π–ª
PUT    /api/news/{id}/media/reorder     - –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫
```

**–ú–æ–¥–µ—Ä–∞—Ü–∏—è** (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–æ–ª–∏ `admin`):
```
POST /api/news/{id}/approve          - –û–¥–æ–±—Ä–∏—Ç—å
POST /api/news/{id}/reject           - –û—Ç–∫–ª–æ–Ω–∏—Ç—å
POST /api/news/{id}/toggle-featured  - –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
POST /api/news/{id}/publish          - –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å
POST /api/news/{id}/unpublish        - –°–Ω—è—Ç—å —Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
POST /api/news/{id}/archive          - –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å
```

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** (—Ç—Ä–µ–±—É–µ—Ç `content.view`):
```
GET /api/news/stats                  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –Ω–æ–≤–æ—Å—Ç—è–º
```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### Backend API —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

```bash
# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –Ω–æ–≤–æ—Å—Ç–µ–π
curl http://localhost:8000/api/news

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (—Å —Ç–æ–∫–µ–Ω–æ–º)
curl -H "Authorization: Bearer YOUR_TOKEN" \
     http://localhost:8000/api/news/stats

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å (—Å —Ç–æ–∫–µ–Ω–æ–º)
curl -X POST http://localhost:8000/api/news \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "–¢–µ—Å—Ç–æ–≤–∞—è –Ω–æ–≤–æ—Å—Ç—å",
    "content": "–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–µ—Å—Ç–æ–≤–æ–π –Ω–æ–≤–æ—Å—Ç–∏",
    "status": "draft"
  }'
```

### Frontend —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: `http://localhost:5173`
2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ù–æ–≤–æ—Å—Ç–∏" –≤ –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å, –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å
5. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ MediaManager

---

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ñ–∞–π–ª–µ:
```
NEWS-SYSTEM-SETUP.md
```

–°–æ–¥–µ—Ä–∂–∏—Ç:
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –Ω–µ–ø–æ–ª–∞–¥–æ–∫
- –°—Ö–µ–º—ã –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

---

## üéä –ü–û–ó–î–†–ê–í–õ–Ø–ï–ú!

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç—è–º–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –ü—Ä–∏—è—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã! üöÄ

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ñ–∞–π–ª—É `NEWS-SYSTEM-SETUP.md` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.
